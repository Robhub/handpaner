(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{216:function(e,t,n){var content=n(252);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(40).default)("1cfd6ee7",content,!0,{sourceMap:!1})},217:function(e,t,n){var content=n(254);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(40).default)("3022eb5f",content,!0,{sourceMap:!1})},218:function(e,t,n){var content=n(256);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(40).default)("4b862863",content,!0,{sourceMap:!1})},219:function(e,t,n){var content=n(258);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(40).default)("4c225de5",content,!0,{sourceMap:!1})},220:function(e,t,n){var content=n(260);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(40).default)("2a55c5f0",content,!0,{sourceMap:!1})},221:function(e,t,n){var content=n(262);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(40).default)("0a16a476",content,!0,{sourceMap:!1})},222:function(e,t,n){var content=n(264);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(40).default)("cf847ff8",content,!0,{sourceMap:!1})},223:function(e,t,n){var content=n(267);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(40).default)("4461744c",content,!0,{sourceMap:!1})},224:function(e,t,n){var content=n(269);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(40).default)("043d56f0",content,!0,{sourceMap:!1})},251:function(e,t,n){"use strict";n(216)},252:function(e,t,n){var o=n(39)(!1);o.push([e.i,".handpans[data-v-2abda733]{display:flex;flex-wrap:wrap}[data-v-2abda733] .handpan-shape{width:200px;height:200px;border-radius:200px}[data-v-2abda733] .handpan-shape.is-bottom{margin-left:25px;width:150px;height:150px;border-radius:150px}[data-v-2abda733] .ding{width:76px;height:76px;margin-left:-38px;margin-top:-38px}[data-v-2abda733] .handpan-diagram.hasMutant .ding{width:64px;height:64px;margin-left:-32px;margin-top:-12px}[data-v-2abda733] .gu{margin-left:-20px;margin-top:-20px}[data-v-2abda733] .gu,[data-v-2abda733] .note span{width:40px;height:40px}[data-v-2abda733] .notes-mutant .note span{width:30px;height:30px}[data-v-2abda733] .is-bottom .note,[data-v-2abda733] .note{height:100%}[data-v-2abda733] .inside{width:24px;height:24px;border-radius:24px}[data-v-2abda733] .ding .inside{width:32px;height:32px;border-radius:32px}",""]),e.exports=o},253:function(e,t,n){"use strict";n(217)},254:function(e,t,n){var o=n(39)(!1);o.push([e.i,".select-speed[data-v-46d9cc08]{font-size:11px;display:flex;align-items:center;height:30px}",""]),e.exports=o},255:function(e,t,n){"use strict";n(218)},256:function(e,t,n){var o=n(39)(!1);o.push([e.i,".select-speed[data-v-b186ccee]{font-size:11px;display:flex;align-items:center;height:30px}",""]),e.exports=o},257:function(e,t,n){"use strict";n(219)},258:function(e,t,n){var o=n(39)(!1);o.push([e.i,".progressbar[data-v-6e7e61c4]{position:relative;width:300px;height:20px;border:1px solid #000}.progress[data-v-6e7e61c4]{background:red;width:2px}.loop[data-v-6e7e61c4],.progress[data-v-6e7e61c4]{position:absolute;height:20px}.loop[data-v-6e7e61c4]{background:grey;width:1px}",""]),e.exports=o},259:function(e,t,n){"use strict";n(220)},260:function(e,t,n){var o=n(39)(!1);o.push([e.i,".song-actions[data-v-ea4cf612]{display:flex;flex-wrap:wrap}.song-actions *[data-v-ea4cf612]{margin:2px 5px}",""]),e.exports=o},261:function(e,t,n){"use strict";n(221)},262:function(e,t,n){var o=n(39)(!1);o.push([e.i,".arpegiator[data-v-3e1f44ca]{margin-top:8px;display:flex;flex-wrap:wrap}.arpegiator *[data-v-3e1f44ca]{margin:2px 5px}",""]),e.exports=o},263:function(e,t,n){"use strict";n(222)},264:function(e,t,n){var o=n(39)(!1);o.push([e.i,".chord-type-name[data-v-894899fe]{min-width:28px;padding-right:8px;text-align:right}",""]),e.exports=o},265:function(e,t,n){"use strict";var o=n(4),r=n(73)(6),l="findIndex",c=!0;l in[]&&Array(1)[l]((function(){c=!1})),o(o.P+o.F*c,"Array",{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(71)(l)},266:function(e,t,n){"use strict";n(223)},267:function(e,t,n){var o=n(39)(!1);o.push([e.i,".form-line[data-v-4870ba1e]{display:flex;align-items:center;height:30px}.form-line>span[data-v-4870ba1e]{width:60px;padding-right:10px;text-align:right}.form-line select[data-v-4870ba1e]{min-width:50px}.form-line input[type=text][data-v-4870ba1e],.form-line select[data-v-4870ba1e]{height:100%;box-sizing:border-box}.form-line select[data-v-4870ba1e]:not(:first-of-type){margin-left:5px}.form-line[data-v-4870ba1e]:not(:first-child){margin-top:5px}",""]),e.exports=o},268:function(e,t,n){"use strict";n(224)},269:function(e,t,n){var o=n(39)(!1);o.push([e.i,"[data-v-086096c8] .chord-type,[data-v-086096c8] .panscales,[data-v-086096c8] .scales,[data-v-086096c8] .selectables{display:flex;flex-wrap:wrap;margin-top:4px}[data-v-086096c8] .chord,[data-v-086096c8] .panscale,[data-v-086096c8] .scale,[data-v-086096c8] .selectable{border:1px solid #333;border-radius:3px;padding:0 5px;cursor:pointer;min-width:32px;text-align:center;margin-left:4px}[data-v-086096c8] .panscale,[data-v-086096c8] .scale{margin-top:4px}[data-v-086096c8] .chord.highlight,[data-v-086096c8] .panscale.highlight,[data-v-086096c8] .scale.highlight,[data-v-086096c8] .selectable.highlight{background:rgba(0,255,204,.50196)!important}.tabs[data-v-086096c8]{display:flex;align-items:center}.tab[data-v-086096c8]{position:relative;width:150px;padding:8px 0;font-weight:700;text-align:center;cursor:pointer;border-bottom:1px solid #666;margin-bottom:-1px}.tab.selected[data-v-086096c8]{background:#fff;border:1px solid #666;border-bottom:none}.tab[data-v-086096c8]:not(.selected):hover{color:#0cc}.tab-content[data-v-086096c8]{background:#fff;border:1px solid #666;min-height:130px;padding:8px}.zone[data-v-086096c8]{margin-top:16px}.delete[data-v-086096c8]{position:absolute;right:2px;top:2px;cursor:pointer;padding:6px;margin-left:16px}.delete[data-v-086096c8]:hover{color:red}.play-options[data-v-086096c8]{display:flex;justify-content:center}.play-options>*[data-v-086096c8]{margin:0 8px}.play-full[data-v-086096c8]{margin-top:10px;text-align:center}",""]),e.exports=o},270:function(e,t,n){"use strict";n.r(t);var o,r=n(194),l=(n(196),n(33),n(12),n(34),n(21),n(35),n(193),n(22),n(72),n(20),n(41),n(0)),c=n(195),d=n(225),h=l.a.extend({components:{HandpanDiagram:d.a},props:{handpans:Array}}),v=(n(251),n(19)),component=Object(v.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"handpans"},e._l(e.handpans,(function(e){return n("HandpanDiagram",{key:e.id,attrs:{handpan:e.handpanModel}})})),1)}),[],!1,null,"2abda733",null),f=component.exports,m=(n(15),l.a.extend({computed:{volume:{get:function(){return this.$store.state.options.playbackSpeed},set:function(e){this.$store.commit("options/setPlaybackSpeed",e),this.$store.dispatch("player/restartRecordPlaying")}}}})),y=(n(253),Object(v.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"select-speed"},[e._v("\n    Playback speed:Â \n    "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.volume,expression:"volume"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.volume=t.target.multiple?n:n[0]}}},[n("option",{domProps:{value:.1}},[e._v("10%")]),e._v(" "),n("option",{domProps:{value:.2}},[e._v("20%")]),e._v(" "),n("option",{domProps:{value:.3}},[e._v("30%")]),e._v(" "),n("option",{domProps:{value:.4}},[e._v("40%")]),e._v(" "),n("option",{domProps:{value:.5}},[e._v("50%")]),e._v(" "),n("option",{domProps:{value:.6}},[e._v("60%")]),e._v(" "),n("option",{domProps:{value:.7}},[e._v("70%")]),e._v(" "),n("option",{domProps:{value:.8}},[e._v("80%")]),e._v(" "),n("option",{domProps:{value:.9}},[e._v("90%")]),e._v(" "),n("option",{domProps:{value:1}},[e._v("100%")]),e._v(" "),n("option",{domProps:{value:1.1}},[e._v("110%")]),e._v(" "),n("option",{domProps:{value:1.2}},[e._v("120%")]),e._v(" "),n("option",{domProps:{value:1.3}},[e._v("130%")]),e._v(" "),n("option",{domProps:{value:1.4}},[e._v("140%")]),e._v(" "),n("option",{domProps:{value:1.5}},[e._v("150%")]),e._v(" "),n("option",{domProps:{value:1.6}},[e._v("160%")]),e._v(" "),n("option",{domProps:{value:1.7}},[e._v("170%")]),e._v(" "),n("option",{domProps:{value:1.8}},[e._v("180%")]),e._v(" "),n("option",{domProps:{value:1.9}},[e._v("190%")]),e._v(" "),n("option",{domProps:{value:2}},[e._v("200%")])])])}),[],!1,null,"46d9cc08",null).exports),_=l.a.extend({computed:{selectedSongParsed:function(){return this.$store.state.selection.selectedSongParsed},recordPlaying:function(){return this.$store.state.player.recordPlaying},playbackPositions:function(){var e=[];if(this.selectedSongParsed)for(var i=0;i<this.selectedSongParsed.record.length;i++)e.push({value:i,label:""+(i+1)});return e},playbackStart:{get:function(){return this.$store.state.selection.playbackStart},set:function(e){this.$store.commit("selection/setPlaybackStart",e),this.$store.dispatch("player/restartRecordPlaying")}},playbackEnd:{get:function(){return this.$store.state.selection.playbackEnd},set:function(e){this.$store.commit("selection/setPlaybackEnd",e),this.$store.dispatch("player/restartRecordPlaying")}}}}),S=(n(255),Object(v.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"select-speed"},[e._v("\n    Loop selection:Â \n    "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.playbackStart,expression:"playbackStart"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.playbackStart=t.target.multiple?n:n[0]}}},e._l(e.playbackPositions,(function(t){return n("option",{key:t.value,domProps:{value:t.value}},[e._v("\n            "+e._s(t.label)+"\n        ")])})),0),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.playbackEnd,expression:"playbackEnd"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.playbackEnd=t.target.multiple?n:n[0]}}},e._l(e.playbackPositions,(function(t){return n("option",{key:t.value,domProps:{value:t.value}},[e._v("\n            "+e._s(t.label)+"\n        ")])})),0)])}),[],!1,null,"b186ccee",null).exports),P=l.a.extend({data:function(){return{timestampStart:0,progress:0,refreshInterval:null}},computed:{parsedSong:function(){return this.$store.state.selection.selectedSongParsed},loopStart:function(){return this.noteToPercentSong(this.$store.state.selection.playbackStart)},loopEnd:function(){return this.noteToPercentSong(this.$store.state.selection.playbackEnd+1)},recordPlaying:function(){return this.$store.state.player.recordPlaying}},methods:{getNoteTime:function(e){var t;return e<this.parsedSong.record.length?null===(t=this.parsedSong.record[e])||void 0===t?void 0:t.time:this.parsedSong.endTime},noteToPercentSong:function(e){return this.timeToPercentSong(this.getNoteTime(e))},timeToPercentSong:function(time){return Math.round(time/this.parsedSong.endTime*300)},processElapsed:function(e){if(this.parsedSong){var t=this.$store.state.options.playbackSpeed,n=this.getNoteTime(this.$store.state.selection.playbackStart),o=this.getNoteTime(this.$store.state.selection.playbackEnd+1)-n;this.progress=this.timeToPercentSong(n+e*t%o)}}},watch:{recordPlaying:function(e){this.timestampStart=(new Date).getTime()}},created:function(){var e=this;this.refreshInterval=setInterval((function(){null!==e.recordPlaying&&e.processElapsed((new Date).getTime()-e.timestampStart)}),50)},beforeDestroy:function(){clearInterval(this.refreshInterval)}}),x=(n(257),Object(v.a)(P,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"progressbar"},[e.parsedSong?[n("div",{staticClass:"loop loop-start",style:{left:e.loopStart+"px"}}),e._v(" "),n("div",{staticClass:"loop loop-end",style:{left:e.loopEnd+"px"}})]:e._e(),e._v(" "),n("div",{staticClass:"progress",style:{left:e.progress+"px"}})],2)])}),[],!1,null,"6e7e61c4",null).exports),C=l.a.extend({components:{SelectPlaybackSpeed:y,SelectPlaybackLoop:S,PlaybackProgress:x},props:{displayedSongs:Array},data:function(){return{}},beforeDestroy:function(){this.$store.commit("player/setRecordPlaying",null)},computed:{displayedSongsSorted:function(){return this.displayedSongs.sort((function(a,b){return a.name.localeCompare(b.name)}))},isPlaying:function(){return null!==this.$store.state.player.recordPlaying},uniqueSongs:function(){return Object(r.a)(new Set(Array.from(this.displayedSongs.map((function(e){return e.name})))))},selectedSong:function(){return this.$store.state.selection.selectedSong},progress:function(){return(new Date).getTime()}},methods:{progressm:function(){return(new Date).getTime()},selectSong:function(e){this.$store.commit("player/setRecordPlaying",null),null!==this.selectedSong&&e===this.selectedSong?this.unselectSong():(this.$store.commit("selection/setHighlightedNotes",e.notes),this.$store.commit("selection/setSelectedSong",e))},unselectSong:function(){this.$store.commit("selection/setHighlightedNotes",[]),this.$store.commit("selection/setSelectedSong",null)},stopSong:function(){this.$store.commit("player/setRecordPlaying",null)},playSong:function(){this.$store.commit("player/setRecordPlaying",this.$store.state.selection.selectedSongParsed)}}}),$=(n(259),Object(v.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("\n    "+e._s(e.uniqueSongs.length)+" different songs.\n    "),n("div",{staticClass:"selectables"},e._l(e.displayedSongsSorted,(function(t){return n("div",{key:t.name+t.transpo,staticClass:"selectable",class:{highlight:e.selectedSong&&t.name===e.selectedSong.name&&t.transpo===e.selectedSong.transpo},on:{click:function(n){return n.stopPropagation(),e.selectSong(t)}}},[t.recording?[e._v("â«")]:e._e(),e._v(e._s(t.name)+" ("+e._s(t.transpo)+")\n        ")],2)})),0),e._v(" "),n("div",{staticClass:"song-actions"},[e.isPlaying?n("button",{on:{click:function(t){return t.stopPropagation(),e.stopSong()}}},[e._v("Stop")]):e._e(),e._v(" "),e.selectedSong&&e.selectedSong.recording&&!e.isPlaying?n("button",{on:{click:function(t){return t.stopPropagation(),e.playSong()}}},[e._v("Play")]):e._e(),e._v(" "),e.selectedSong?[n("SelectPlaybackSpeed"),e._v(" "),n("SelectPlaybackLoop"),e._v(" "),n("PlaybackProgress")]:e._e()],2)])}),[],!1,null,"ea4cf612",null).exports),N=l.a.extend({computed:{volume:{get:function(){return this.$store.state.options.arpeggioMode},set:function(e){this.$store.commit("options/setArpeggioMode",e)}}}}),w=Object(v.a)(N,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"select-arpeggio"},[e._v("\n    Arpeggio mode:Â \n    "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.volume,expression:"volume"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.volume=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"up"}},[e._v("Up")]),e._v(" "),n("option",{attrs:{value:"upstairs"}},[e._v("Up stairs")]),e._v(" "),n("option",{attrs:{value:"down"}},[e._v("Down")]),e._v(" "),n("option",{attrs:{value:"downstairs"}},[e._v("Down stairs")]),e._v(" "),n("option",{attrs:{value:"updown"}},[e._v("Up & down")]),e._v(" "),n("option",{attrs:{value:"updownstairs"}},[e._v("Up & down stairs")])])])}),[],!1,null,null,null).exports;n(36);function A(e,t){var n=[],l=0;if(t===o.UP)n=e;else if(t===o.UPSTAIRS)n=e.flatMap((function(e,i,t){return t[i-1]&&t[i+1]?[t[i-1],e,t[i+1]]:[]}));else if(t===o.DOWN)n=Object(r.a)(e).reverse();else if(t===o.DOWNSTAIRS)n=Object(r.a)(e).reverse().flatMap((function(e,i,t){return t[i-1]&&t[i+1]?[t[i-1],e,t[i+1]]:[]}));else if(t===o.UPDOWN){var c=e.slice(1,-1).reverse();n=[].concat(Object(r.a)(e),Object(r.a)(c))}else if(t===o.UPDOWNSTAIRS){var d=Object(r.a)(e).reverse(),h=e.flatMap((function(e,i,t){return t[i-1]&&t[i+1]?[t[i-1],e,t[i+1]]:[]})),v=d.flatMap((function(e,i,t){return t[i-1]&&t[i+1]?[t[i-1],e,t[i+1]]:[]}));n=[].concat(Object(r.a)(h),Object(r.a)(v.slice(1))),l=1}else console.error("Unknown arpeggio mode",t);return{endTime:200*(n.length+l),record:n.map((function(e,i){return{time:200*i,note:e}}))}}!function(e){e.UP="up",e.UPSTAIRS="upstairs",e.DOWN="down",e.DOWNSTAIRS="downstairs",e.UPDOWN="updown",e.UPDOWNSTAIRS="updownstairs"}(o||(o={}));var k=l.a.extend({props:{arpegiatedNotes:Array},components:{SelectArpeggio:w},computed:{isPlaying:function(){return null!==this.$store.state.player.recordPlaying},arpeggioMode:function(){return this.$store.state.options.arpeggioMode},recordQueued:function(){return this.$store.state.player.recordQueued}},watch:{arpeggioMode:function(){this.isPlaying&&this.restartArpegiator()},arpegiatedNotes:function(){var e=A(this.arpegiatedNotes,this.arpeggioMode);this.$store.commit("player/setRecordQueued",e)}},methods:{playArpegiator:function(){var e=A(this.arpegiatedNotes,this.arpeggioMode);this.$store.commit("player/setRecordPlaying",e)},stopArpegiator:function(){this.$store.commit("player/setRecordPlaying",null)},restartArpegiator:function(){var e=this;this.$store.commit("player/setRecordPlaying",null),setTimeout((function(){e.playArpegiator()}),1)}}}),M=(n(261),Object(v.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"arpegiator"},[n("SelectArpeggio"),e._v(" "),e.isPlaying?n("button",{on:{click:function(t){return t.stopPropagation(),e.stopArpegiator()}}},[e._v("Stop")]):e._e(),e._v(" "),e.arpegiatedNotes&&e.arpegiatedNotes.length&&!e.isPlaying?n("button",{on:{click:function(t){return t.stopPropagation(),e.playArpegiator()}}},[e._v("Play")]):e._e()],1)}),[],!1,null,"3e1f44ca",null).exports),H=l.a.extend({props:{displayedChords:Array,handpansUser:Array},components:{Arpegiator:M},computed:{isPlaying:function(){return null!==this.$store.state.player.recordPlaying},selectedChord:{get:function(){return this.$store.state.selection.selectedChord},set:function(e){this.$store.commit("selection/setSelectedChord",e)}},notesMatchingChord:function(){var e=this,t=this.handpansUser.flatMap((function(t){return t.handpanModel.notes.filter((function(t){return-1!==e.selectedChord.noteNames.indexOf(t.noteName)}))}));return Object(c.n)(Object(c.k)(t))}},beforeDestroy:function(){this.$store.commit("player/setRecordPlaying",null)},methods:{selectChord:function(e,t){t.label===this.selectedChord.label?this.unselectChord():(this.selectedChord={label:t.label,root:t.root,type:e.type,noteNames:[].concat(Object(r.a)(t.notes.map((function(e){return Object(c.i)(t.root,e)}))),Object(r.a)(t.notes.map((function(e){return Object(c.h)(t.root,e)}))))},this.isPlaying)},unselectChord:function(){this.$store.commit("player/setRecordPlaying",null),this.selectedChord={label:"",type:"",root:"",noteNames:[]}}}}),D=H,O=(n(263),Object(v.a)(D,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(e.displayedChords,(function(t){return n("div",{key:t.type,staticClass:"chord-type"},[n("div",{staticClass:"chord-type-name"},[e._v(e._s(t.type))]),e._v(" "),e._l(t.chords,(function(o){return n("div",{key:o.label,staticClass:"chord",class:{highlight:o.label===e.selectedChord.label},domProps:{innerHTML:e._s(o.label)},on:{click:function(n){return n.stopPropagation(),e.selectChord(t,o)}}})}))],2)})),e._v(" "),n("div",{staticClass:"actions"},[e.selectedChord.noteNames?n("Arpegiator",{attrs:{arpegiatedNotes:e.notesMatchingChord}}):e._e()],1)],2)}),[],!1,null,"894899fe",null).exports),U=l.a.extend({props:{displayedPanScales:Array,handpansUser:Array},components:{Arpegiator:M},computed:{selectedPanScale:{get:function(){return this.$store.state.selection.selectedPanScale},set:function(e){this.$store.commit("selection/setSelectedPanScale",e)}},notesMatchingPanScale:function(){return this.selectedPanScale?Object(c.n)(Object(c.k)(Object(r.a)(this.selectedPanScale.notes))):[]}},beforeDestroy:function(){this.$store.commit("player/setRecordPlaying",null),this.unselectPanScale()},methods:{selectPanScale:function(e){var t;e.name===(null===(t=this.selectedPanScale)||void 0===t?void 0:t.name)?this.unselectPanScale():this.selectedPanScale=e},unselectPanScale:function(){this.$store.commit("player/setRecordPlaying",null),this.selectedPanScale=null}}}),j=Object(v.a)(U,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"panscales"},[e._l(e.displayedPanScales,(function(t){return n("div",{key:t.name,staticClass:"panscale",class:{highlight:e.selectedPanScale&&t.name===e.selectedPanScale.name},on:{click:function(n){return n.stopPropagation(),e.selectPanScale(t)}}},[e._v("\n            "+e._s(t.name)+"\n        ")])})),e._v(" "),e.displayedPanScales.length?e._e():n("div",[e._v("Nothingâ¦")])],2),e._v(" "),n("div",{staticClass:"actions"},[e.selectedPanScale?n("Arpegiator",{attrs:{arpegiatedNotes:e.notesMatchingPanScale}}):e._e()],1)])}),[],!1,null,null,null).exports,R=(n(265),l.a.extend({props:{displayedScales:Array,handpansUser:Array},components:{Arpegiator:M},computed:{selectedScale:{get:function(){return this.$store.state.selection.selectedScale},set:function(e){this.$store.commit("selection/setSelectedScale",e)}},displayedScalesSorted:function(){return this.displayedScales.sort((function(a,b){return b.totalNotes-a.totalNotes}))},notesMatchingScale:function(){var e=this,t=this.handpansUser.flatMap((function(t){return t.handpanModel.notes.filter((function(t){return-1!==e.selectedScale.noteNames.indexOf(t.noteName)}))})),n=Object(c.k)(t),o=n.findIndex((function(t){return t.noteName===e.selectedScale.tonic}));return Object(c.n)(n.splice(o))}},beforeDestroy:function(){this.$store.commit("player/setRecordPlaying",null),this.unselectScale()},methods:{selectScale:function(e){e.id===this.selectedScale.id?this.unselectScale():this.selectedScale=e},unselectScale:function(){this.$store.commit("player/setRecordPlaying",null),this.selectedScale={}}}})),I=R,E=Object(v.a)(I,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"scales"},[e._l(e.displayedScalesSorted,(function(t){return n("div",{key:t.id,staticClass:"scale",class:{highlight:t.id===e.selectedScale.id},on:{click:function(n){return n.stopPropagation(),e.selectScale(t)}}},[e._v("\n            "+e._s(t.tonic)+" "+e._s(t.name)+"\n        ")])})),e._v(" "),e.displayedScales.length?e._e():n("div",[e._v("Nothingâ¦")])],2),e._v(" "),n("div",{staticClass:"actions"},[e.selectedScale.noteNames?n("Arpegiator",{attrs:{arpegiatedNotes:e.notesMatchingScale}}):e._e()],1)])}),[],!1,null,null,null).exports,T=n(198),B=(n(139),l.a.extend({props:{handpansUser:Array,displayedHandpanId:String},data:function(){return{isLoaded:!1,ignoreNextHashChange:!1,ALL_DINGS:T.a,inputAbsNotation:"",inputDing:"",inputPanscale:""}},computed:{showRelative:{get:function(){return this.$store.state.selection.showRelative},set:function(e){this.$store.commit("selection/setShowRelative",e)}},relativeNoteBase:{get:function(){return this.$store.state.selection.relativeNoteBase},set:function(e){this.$store.commit("selection/setRelativeNoteBase",e)}},allGenericNamesSorted:function(){var e=(this.isLoaded?Object(T.b)(this.$store.state.options.customPanScales):[]).map((function(e){return e.genericName}));return Object(r.a)(new Set(e)).sort((function(a,b){return a.localeCompare(b)}))},playPath:function(){return this.displayedHandpan?"play/#"+this.displayedHandpan.handpanModel.getDefinition().replace(/ /g,"-"):"play/"},uniqueNotesAllPans:function(){return Object(r.a)(new Set(Array.from(this.handpansUser.flatMap((function(e){return e.handpanModel.getUniqueNotesNames()})))))},displayedHandpan:function(){var e=this;return this.handpansUser.find((function(t){return t.id===e.displayedHandpanId}))}},created:function(){var e=this;setTimeout((function(){e.isLoaded=!0}),1)},mounted:function(){this.displayedHandpan&&(this.relativeNoteBase=this.displayedHandpan.handpanModel.getDing().noteName)},methods:{WTF:function(e){},dingChanged:function(){try{this.$store.commit("selection/loadFromDefinition",{id:this.displayedHandpan.id,definition:this.inputAbsNotation,dingWanted:this.inputDing}),this.inputAbsNotation=this.displayedHandpan.handpanModel.getDefinition(),this.selectionChanged(),this.relativeNoteBase=this.displayedHandpan.handpanModel.getDing().noteName}catch(e){console.log("err",e)}},modelNameChanged:function(){var e=this;if(this.inputPanscale&&this.inputDing){var t=Object(T.b)(this.$store.state.options.customPanScales).find((function(t){return t.genericName===e.inputPanscale&&t.getDingString()===e.inputDing}));t&&(this.inputAbsNotation=t.getDefinition(),this.$store.commit("selection/loadFromDefinition",{id:this.displayedHandpan.id,definition:this.inputAbsNotation}),this.selectionChanged())}},absChanged:function(){try{this.$store.commit("selection/loadFromDefinition",{id:this.displayedHandpan.id,definition:this.inputAbsNotation}),this.inputDing=this.displayedHandpan.handpanModel.getDingString(),this.inputPanscale=this.recognisedPanScaleName(),this.selectionChanged()}catch(e){console.log("err",e)}},saveModel:function(){var e=prompt("Model name");e&&this.$store.commit("options/addCustomPanScale",{name:e,definition:this.inputAbsNotation})},selectionChanged:function(){this.$emit("selectionChanged")},recognisedPanScaleName:function(){var e=this,t=Object(T.b)(this.$store.state.options.customPanScales).find((function(t){return t.getDefinition()===e.displayedHandpan.handpanModel.getDefinition()}));return t?t.genericName:""}},watch:{displayedHandpanId:function(){this.inputAbsNotation=this.displayedHandpan.handpanModel.getDefinition(),this.inputDing=this.displayedHandpan.handpanModel.getDingString(),this.inputPanscale=this.recognisedPanScaleName()}}})),F=B,L=(n(266),Object(v.a)(F,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"form-line"},[n("span",[e._v("Ding")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.inputDing,expression:"inputDing"}],on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.inputDing=t.target.multiple?n:n[0]},e.dingChanged]}},e._l(e.ALL_DINGS,(function(t){return n("option",{key:t},[e._v(e._s(t))])})),0)]),e._v(" "),n("div",{staticClass:"form-line"},[n("span",[e._v("Model")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.inputPanscale,expression:"inputPanscale"}],on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.inputPanscale=t.target.multiple?n:n[0]},e.modelNameChanged]}},e._l(e.allGenericNamesSorted,(function(t){return n("option",{key:t,domProps:{value:t}},[e._v("\n                "+e._s(t)+"\n            ")])})),0)]),e._v(" "),n("div",{staticClass:"form-line"},[n("span",[e._v("Notes")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.inputAbsNotation,expression:"inputAbsNotation"}],attrs:{type:"text",size:"30",placeholder:"Ex: C/ D E F G A B C"},domProps:{value:e.inputAbsNotation},on:{keyup:e.absChanged,input:function(t){t.target.composing||(e.inputAbsNotation=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"form-line"},[n("span",[e._v("Relative")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.relativeNoteBase,expression:"relativeNoteBase"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.relativeNoteBase=t.target.multiple?n:n[0]}}},e._l(e.uniqueNotesAllPans,(function(t){return n("option",{key:t},[e._v(e._s(t))])})),0),e._v(" "),n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.showRelative,expression:"showRelative"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.showRelative)?e._i(e.showRelative,null)>-1:e.showRelative},on:{change:function(t){var n=e.showRelative,o=t.target,r=!!o.checked;if(Array.isArray(n)){var l=e._i(n,null);o.checked?l<0&&(e.showRelative=n.concat([null])):l>-1&&(e.showRelative=n.slice(0,l).concat(n.slice(l+1)))}else e.showRelative=r}}}),e._v(" show relative")])]),e._v(" "),e.inputPanscale?e._e():n("button",{on:{click:function(t){return e.saveModel()}}},[e._v("ð¾ Save model")]),e._v(" "),n("div",{staticClass:"play-full"},[n("nuxt-link",{attrs:{to:e.playPath}},[e._v("Play in full page")])],1)])}),[],!1,null,"4870ba1e",null).exports),W=l.a.extend({components:{HandpanDiagrams:f,HandpanSelection:L,Songs:$,Chords:O,Scales:E,PanScales:j},data:function(){return{displayMode:"panScales",displayedHandpanId:"",displayedScales:[],displayedChords:[],displayedPanScales:[],displayedSongs:[],ignoreNextHashChange:!1,isLoaded:!1}},created:function(){var e=this;this.handpansUser=[],setTimeout((function(){e.isLoaded=!0;var t=e.$store.state.selection.handpansDefinition;e.$nuxt.$route.hash?e.loadHandpansFromHash():t&&t.length?(e.loadHandpansFromDefinitions(t),e.updateHash()):(e.handpansUser=[].concat(Object(r.a)(e.handpansUser),[new T.d("D/ A C D E F G A C")]),e.displayedHandpanId=e.handpansUser[0].id,e.genScalesAndChordsAllPans())}),1)},computed:{handpansUser:{get:function(){return this.$store.state.selection.handpansUser},set:function(e){this.$store.commit("selection/setHandpansUser",e)}},showBebop:function(){return this.$store.state.options.showBebop},uniqueNotesAllPans:function(){return Object(r.a)(new Set(Array.from(this.handpansUser.flatMap((function(e){return e.handpanModel.getUniqueNotesNames()})))))}},watch:{$route:function(){this.ignoreNextHashChange?this.ignoreNextHashChange=!1:(this.handpansUser=[],this.loadHandpansFromHash())}},mounted:function(){this.$store.commit("selection/setHighlightedNotes",[])},methods:{onSelectionChanged:function(){this.$store.commit("player/setRecordPlaying",null),this.genScalesAndChordsAllPans(),this.updateHash()},resetSelection:function(){this.unselectPanScale(),this.unselectScale(),this.unselectChord(),this.unselectSong()},unselectPanScale:function(){this.$store.commit("selection/setSelectedPanScale",null)},unselectScale:function(){this.$store.commit("selection/setSelectedScale",{})},unselectChord:function(){this.$store.commit("selection/setSelectedChord",{})},unselectSong:function(){this.$store.commit("selection/setHighlightedNotes",[]),this.$store.commit("selection/setSelectedSong",null)},loadHandpansFromHash:function(){var e=this.$nuxt.$route.hash.substr(1).split("_").filter(Boolean);this.loadHandpansFromDefinitions(e.map((function(e){return e.replace(/-/g," ")})))},loadHandpansFromDefinitions:function(e){var t=this;this.handpansUser=[],e.length>0?e.forEach((function(e){t.handpansUser=[].concat(Object(r.a)(t.handpansUser),[new T.d(e)])})):this.handpansUser=[new T.d("D/ A C D E F G A C")],this.displayedHandpanId=this.handpansUser[0].id,this.genScalesAndChordsAllPans()},removeHandpanId:function(e,t){e.stopPropagation(),this.handpansUser=this.handpansUser.filter((function(e){return e.id!==t})),t===this.displayedHandpanId&&(this.displayedHandpanId=this.handpansUser[0].id),this.genScalesAndChordsAllPans(),this.updateHash()},addHandpan:function(){var e=new T.d("C/ C");this.handpansUser=[].concat(Object(r.a)(this.handpansUser),[e]),this.displayedHandpanId=e.id,this.genScalesAndChordsAllPans(),this.updateHash()},updateHash:function(){var e=this.$nuxt.$route.hash,t="#"+this.handpansUser.map((function(e){return e.handpanModel.getDefinition().replace(/ /g,"-")})).join("_");"_"!==t[t.length-1]&&(t+="_"),t!==e&&(this.ignoreNextHashChange=!0,this.$nuxt.$router.replace(t))},genScalesAndChordsAllPans:function(){this.displayedScales=Object(c.f)(this.handpansUser,{showBebop:this.showBebop});var e=Object(T.b)(this.$store.state.options.customPanScales);this.displayedPanScales=Object(c.e)(e,this.handpansUser),this.displayedChords=Object(c.d)(this.uniqueNotesAllPans),this.displayedSongs=Object(c.g)(this.handpansUser)},selectHandpanId:function(e){this.displayedHandpanId=e}}}),z=(n(268),Object(v.a)(W,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"tabs",on:{click:function(t){return e.resetSelection()}}},[e._l(e.handpansUser,(function(t,o){return n("div",{key:t.id,staticClass:"tab",class:{selected:t.id===e.displayedHandpanId},on:{click:function(n){return e.selectHandpanId(t.id)}}},[e._v("\n            Pan nÂ°"+e._s(o+1)+"\n            "),e.handpansUser.length>1?n("span",{staticClass:"delete",on:{click:function(n){return e.removeHandpanId(n,t.id)}}},[e._v("Ã")]):e._e()])})),e._v(" "),n("div",{staticClass:"tab",on:{click:function(t){return e.addHandpan()}}},[e._v("+ add pan")])],2),e._v(" "),n("div",{staticClass:"tab-content",on:{click:function(t){return e.resetSelection()}}},[n("HandpanSelection",{attrs:{handpansUser:e.handpansUser,displayedHandpanId:e.displayedHandpanId},on:{selectionChanged:e.onSelectionChanged}})],1),e._v(" "),e.displayedHandpanId?n("div",[n("div",{staticClass:"zone"},[n("div",{staticClass:"tabs",on:{click:function(t){return e.resetSelection()}}},[n("div",{staticClass:"tab",class:{selected:"panScales"===e.displayMode},on:{click:function(t){e.displayMode="panScales"}}},[e._v("\n                    Models\n                ")]),e._v(" "),n("div",{staticClass:"tab",class:{selected:"scales"===e.displayMode},on:{click:function(t){e.displayMode="scales"}}},[e._v("Scales")]),e._v(" "),n("div",{staticClass:"tab",class:{selected:"chords"===e.displayMode},on:{click:function(t){e.displayMode="chords"}}},[e._v("Chords")]),e._v(" "),n("div",{staticClass:"tab",class:{selected:"songs"===e.displayMode},on:{click:function(t){e.displayMode="songs"}}},[e._v("Songs")])]),e._v(" "),"panScales"===e.displayMode?n("div",{staticClass:"tab-content"},[n("PanScales",{attrs:{displayedPanScales:e.displayedPanScales}})],1):e._e(),e._v(" "),"scales"===e.displayMode?n("div",{staticClass:"tab-content"},[n("Scales",{attrs:{displayedScales:e.displayedScales,handpansUser:e.handpansUser}})],1):e._e(),e._v(" "),"chords"===e.displayMode?n("div",{staticClass:"tab-content"},[n("Chords",{attrs:{displayedChords:e.displayedChords,handpansUser:e.handpansUser}})],1):e._e(),e._v(" "),"songs"===e.displayMode?n("div",{staticClass:"tab-content"},[n("Songs",{attrs:{displayedSongs:e.displayedSongs}})],1):e._e()]),e._v(" "),n("div",{staticClass:"zone"},[n("HandpanDiagrams",{attrs:{handpans:e.handpansUser}})],1)]):e._e()])}),[],!1,null,"086096c8",null));t.default=z.exports}}]);